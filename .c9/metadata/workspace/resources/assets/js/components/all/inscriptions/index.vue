{"changed":true,"filter":false,"title":"index.vue","tooltip":"/resources/assets/js/components/all/inscriptions/index.vue","value":"<template>\n    <div class=\"col-xs-12\">\n        <h1>\n            Liste des inscriptions\n            <small>\n                <ui-icon-button\n                    type=\"secondary\" icon=\"add\" color=\"accent\" size=\"large\"\n                    @click.prevent=\"create()\"\n                    >\n                </ui-icon-button>\n            </small>\n        </h1>\n        <table\n            class=\"table table-striped\"\n            v-if=\"inscriptions.length > 0\">\n            <thead>\n              <tr>\n                  <th>#</th>\n                  <th>Saison</th>\n                  <th>Nom</th>\n                  <th>Pr&eacute;nom</th>\n              </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"inscription in inscriptions\">\n                    <td>\n                        <ui-icon-button\n                            type=\"secondary\" icon=\"edit\" color=\"orange\" size=\"large\"\n                            @click.prevent=\"edit(inscription.id)\">\n                        </ui-icon-button>\n                        <ui-icon-button\n                            type=\"secondary\" size=\"large\" icon=\"delete\" color=\"red\"\n                            @click.prevent=\"destroy(inscription.id)\">\n                        </ui-icon-button>\n                    </td>\n                    <td>{{ inscription.firstname }}</td>\n                    <td>{{ inscription.lastname }}</td>\n                </tr>\n            </tbody>\n        </table>\n        <ui-confirm\n            title=\"Suppression\" type=\"primary\"\n            confirm-button-icon=\"delete\"\n            confirm-button-text=\"Supprimer\"\n            deny-button-text=\"Annuler\"\n            ref=\"deleteConfirm\"\n            @confirm=\"deleteConfirmed\"\n            @deny=\"deleteDenied\"\n            close-on-confirm\n            >\n            &ecirc;tes-vous s&ucirc;r de vouloir supprimer l'utilisateur ?\n        </ui-confirm>\n    </div>\n</template>\n<script>\n    import auth from '../../../auth';\n    import vMenu from '../../v-menu.vue';\n    import Keen from 'keen-ui';\n    import {app} from './../../../app.js';\n    import {router} from './../../../app.js';\n    export default {\n        data() {\n            return {\n                auth:           auth,\n                inscriptions:   [],\n                deleteId:       Number,\n                show: {\n                    deleteConfirm: false\n                }\n            }\n        },\n        methods: {\n            index() {\n                const _self = this;\n                _self.$http.get('api/inscriptions').then(\n                    (response) => {\n                        let data = response.data;\n                        _self.inscriptions = data.list;\n                    },\n                    (response) => {\n                        console.log(response);\n                    }\n                )\n            },\n            create() {\n                router.push({ name: 'inscriptions_edit' });\n            },\n            edit(id) {\n                router.push({ name: 'inscriptions_edit', params: { id: id } });\n            },\n            destroy(id) {\n                const _self = this;\n                _self.deleteId = id;\n                _self.$refs['deleteConfirm'].open();\n            },\n            deleteConfirmed() {\n                const _self = this;\n                _self.$http.delete('api/admin/user/' + _self.deleteId).then(function(response) {\n                    _self.$emit('sas-snackbar', 'Utilisateur supprimé');\n                    _self.index();\n                }, function(response) {\n                    console.log(response);\n                });\n            },\n            deleteDenied() {\n\n            },\n            toggleAdmin(id) {\n              const _self = this;\n              _self.$http.put('api/user/' + id + '/toggle/admin').then(\n                (response) => {\n                  _self.$emit('sas-snackbar', 'Utilisateur modifié');\n                  _self.index();\n                },\n                (response) => {\n                  console.log(response);\n                }\n              );\n            },\n            toggleTeacher(id) {\n              const _self = this;\n              _self.$http.put('api/user/' + id + '/toggle/teacher').then(\n                (response) => {\n                  _self.$emit('sas-snackbar', 'Utilisateur modifié');\n                  _self.index();\n                },\n                (response) => {\n                  console.log(response);\n                }\n              );\n            }\n        },\n        components: {\n            vMenu\n        },\n        mounted() {\n            this.$nextTick(function() {\n               const _self = this;\n               auth.check(_self);\n               _self.index();\n            });\n        }\n    }\n</script>\n","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":88,"column":0},"end":{"row":89,"column":0},"action":"remove","lines":["                const _self = this;",""],"id":2}]]},"ace":{"folds":[],"scrolltop":1080,"scrollleft":0,"selection":{"start":{"row":88,"column":0},"end":{"row":88,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":76,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1492159809162}
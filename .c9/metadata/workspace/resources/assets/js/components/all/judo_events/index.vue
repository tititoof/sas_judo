{"filter":false,"title":"index.vue","tooltip":"/resources/assets/js/components/all/judo_events/index.vue","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":0},"end":{"row":172,"column":0},"action":"insert","lines":["<template>","    <div>","        <h1>","            &Eacute;v&egrave;nements","            <small>","                <ui-icon-button","                        type=\"secondary\" icon=\"add\" color=\"accent\" size=\"large\"","                        @click.prevent=\"create()\"","                >","                </ui-icon-button>","            </small>","        </h1>","        <full-calendar","            :events=\"fcEvents\"","            lang=\"fr\"","            firstDay=\"1\"","            @changeMonth=\"changeMonth\"","            @eventClick=\"eventClick\"","            @dayClick=\"dayClick\"","            @moreClick=\"moreClick\"","        >","        </full-calendar>","        <ui-modal","            dismiss-on=\"close-button esc\"","            ref=\"eventModal\"","            :title=\"eventTitle\"","            >","            <div v-html=\"eventDescription\"></div>","            <div slot=\"footer\">","                <ui-button @click=\"destroy()\"","                           color=\"red\">Supprimer</ui-button>","                <ui-button v-if=\"isAdmin\"","                            @click=\"edit()\"","                           color=\"orange\">Editer</ui-button>","                <ui-button @click=\"closeModal()\">Fermer</ui-button>","            </div>","        </ui-modal>","        <ui-confirm","                title=\"Suppression\" type=\"primary\"","                confirm-button-icon=\"delete\"","                confirm-button-text=\"Supprimer\"","                deny-button-text=\"Annuler\"","                ref=\"deleteConfirm\"","                @confirm=\"deleteConfirmed\"","                @deny=\"deleteDenied\"","                close-on-confirm","        >","            &ecirc;tes-vous s&ucirc;r de vouloir supprimer l'évènement ?","        </ui-confirm>","    </div>","</template>","<script>","    import auth from '../../../auth';","    import vMenu from '../../v-menu.vue';","    import Keen from 'keen-ui';","    import {app} from './../../../app.js';","    import {router} from './../../../app.js';","    import fullCalendar from 'vue-fullcalendar';","    import moment from 'moment';","    export default {","        data() {","            return {","                auth:             auth,","                fcEvents:         [],","                eventTitle:       '',","                eventDescription: '',","                deleteId:         Number,","                show: {","                    deleteConfirm: false","                }","            }","        },","        computed: {","          isAdmin() {","              return this.auth.checkIsAdmin();","          }","        },","        methods: {","            edit() {","                const _self = this;","                router.push({ name: 'admin_judo_event_edit', params: { id: _self.deleteId } });","            },","            destroy() {","                const _self = this;","                _self.$refs['deleteConfirm'].open();","            },","            deleteConfirmed() {","                const _self = this;","                _self.closeModal();","                _self.$http.delete('api/judoevent/' + _self.deleteId).then(","                    () => {","                    _self.$emit('sas-snackbar', 'évènement supprimé');","                    _self.index();","                }).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            deleteDenied() {","","            },","            index() {","                const _self = this;","                _self.$http.get('api/judoevent').then(","                    (response) => {","                    _self.fcEvents = response.data.events;","                }).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            create() {","                router.push({ name: 'admin_judo_event_new' });","            },","            'eventClick' (event) {","                const _self = this;","                _self.$http.get('api/judoevent/' + event.id).then(","                    (response) => {","                        const data = response.data.entity;","                        _self.setModalEvent(data);","                        _self.$refs['eventModal'].open();","                    }","                ).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            'dayClick' (day) {","                router.push({ name: 'admin_judo_event_new', params: { startAt: day } });","            },","            setModalEvent(event) {","                const _self = this,","                    startAt = new moment(event.start_at).locale('fr'),","                    endAt   = new moment(event.end_at).locale('fr');","                switch (event.type) {","                    case 'tournament':","                        _self.eventTitle = \"Compétition\";","                        break;","                    case 'stage':","                        _self.eventTitle = \"Stage\";","                        break;","                    case 'event':","                    default:","                        _self.eventTitle = \"Evènement\";","                        break;","                }","                _self.eventDescription = \"<strong>\" + event.name + \"</strong><br/>\";","                _self.eventDescription += event.description + \"<br/>\";","                _self.eventDescription += \"Début : \" + startAt.format(\"dddd, MMMM Do YYYY, H:mm:ss\");","                _self.eventDescription += \"<br/>Fin :\" + endAt.format(\"dddd, MMMM Do YYYY, H:mm:ss\");","                _self.deleteId = event.id;","            },","            closeModal() {","                const _self = this;","                _self.$refs['eventModal'].close();","            }","        },","        components: {","            vMenu, fullCalendar","        },","        mounted() {","            this.$nextTick(function () {","                const _self = this;","                auth.check(_self);","                _self.index();","            });","        }","    }","</script>",""],"id":1}],[{"start":{"row":37,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["        <ui-confirm","                title=\"Suppression\" type=\"primary\"","                confirm-button-icon=\"delete\"","                confirm-button-text=\"Supprimer\"","                deny-button-text=\"Annuler\"","                ref=\"deleteConfirm\"","                @confirm=\"deleteConfirmed\"","                @deny=\"deleteDenied\"","                close-on-confirm","        >","            &ecirc;tes-vous s&ucirc;r de vouloir supprimer l'évènement ?","        </ui-confirm>",""],"id":2}],[{"start":{"row":29,"column":0},"end":{"row":34,"column":0},"action":"remove","lines":["                <ui-button @click=\"destroy()\"","                           color=\"red\">Supprimer</ui-button>","                <ui-button v-if=\"isAdmin\"","                            @click=\"edit()\"","                           color=\"orange\">Editer</ui-button>",""],"id":3}],[{"start":{"row":4,"column":0},"end":{"row":11,"column":0},"action":"remove","lines":["            <small>","                <ui-icon-button","                        type=\"secondary\" icon=\"add\" color=\"accent\" size=\"large\"","                        @click.prevent=\"create()\"","                >","                </ui-icon-button>","            </small>",""],"id":4}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["        computed: {",""],"id":5}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["          isAdmin() {",""],"id":6}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["              return this.auth.checkIsAdmin();",""],"id":7}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["          }",""],"id":8}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["        },",""],"id":9}]]},"ace":{"folds":[],"scrolltop":360,"scrollleft":0,"selection":{"start":{"row":48,"column":0},"end":{"row":48,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":101,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1502863102778,"hash":"5f0c93357e10f32f6703e12a56cd8d1b0872fb07"}
{"filter":false,"title":"index.vue","tooltip":"/resources/assets/js/components/all/judo_events/index.vue","undoManager":{"mark":65,"position":65,"stack":[[{"start":{"row":0,"column":0},"end":{"row":172,"column":0},"action":"insert","lines":["<template>","    <div>","        <h1>","            &Eacute;v&egrave;nements","            <small>","                <ui-icon-button","                        type=\"secondary\" icon=\"add\" color=\"accent\" size=\"large\"","                        @click.prevent=\"create()\"","                >","                </ui-icon-button>","            </small>","        </h1>","        <full-calendar","            :events=\"fcEvents\"","            lang=\"fr\"","            firstDay=\"1\"","            @changeMonth=\"changeMonth\"","            @eventClick=\"eventClick\"","            @dayClick=\"dayClick\"","            @moreClick=\"moreClick\"","        >","        </full-calendar>","        <ui-modal","            dismiss-on=\"close-button esc\"","            ref=\"eventModal\"","            :title=\"eventTitle\"","            >","            <div v-html=\"eventDescription\"></div>","            <div slot=\"footer\">","                <ui-button @click=\"destroy()\"","                           color=\"red\">Supprimer</ui-button>","                <ui-button v-if=\"isAdmin\"","                            @click=\"edit()\"","                           color=\"orange\">Editer</ui-button>","                <ui-button @click=\"closeModal()\">Fermer</ui-button>","            </div>","        </ui-modal>","        <ui-confirm","                title=\"Suppression\" type=\"primary\"","                confirm-button-icon=\"delete\"","                confirm-button-text=\"Supprimer\"","                deny-button-text=\"Annuler\"","                ref=\"deleteConfirm\"","                @confirm=\"deleteConfirmed\"","                @deny=\"deleteDenied\"","                close-on-confirm","        >","            &ecirc;tes-vous s&ucirc;r de vouloir supprimer l'évènement ?","        </ui-confirm>","    </div>","</template>","<script>","    import auth from '../../../auth';","    import vMenu from '../../v-menu.vue';","    import Keen from 'keen-ui';","    import {app} from './../../../app.js';","    import {router} from './../../../app.js';","    import fullCalendar from 'vue-fullcalendar';","    import moment from 'moment';","    export default {","        data() {","            return {","                auth:             auth,","                fcEvents:         [],","                eventTitle:       '',","                eventDescription: '',","                deleteId:         Number,","                show: {","                    deleteConfirm: false","                }","            }","        },","        computed: {","          isAdmin() {","              return this.auth.checkIsAdmin();","          }","        },","        methods: {","            edit() {","                const _self = this;","                router.push({ name: 'admin_judo_event_edit', params: { id: _self.deleteId } });","            },","            destroy() {","                const _self = this;","                _self.$refs['deleteConfirm'].open();","            },","            deleteConfirmed() {","                const _self = this;","                _self.closeModal();","                _self.$http.delete('api/judoevent/' + _self.deleteId).then(","                    () => {","                    _self.$emit('sas-snackbar', 'évènement supprimé');","                    _self.index();","                }).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            deleteDenied() {","","            },","            index() {","                const _self = this;","                _self.$http.get('api/judoevent').then(","                    (response) => {","                    _self.fcEvents = response.data.events;","                }).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            create() {","                router.push({ name: 'admin_judo_event_new' });","            },","            'eventClick' (event) {","                const _self = this;","                _self.$http.get('api/judoevent/' + event.id).then(","                    (response) => {","                        const data = response.data.entity;","                        _self.setModalEvent(data);","                        _self.$refs['eventModal'].open();","                    }","                ).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            'dayClick' (day) {","                router.push({ name: 'admin_judo_event_new', params: { startAt: day } });","            },","            setModalEvent(event) {","                const _self = this,","                    startAt = new moment(event.start_at).locale('fr'),","                    endAt   = new moment(event.end_at).locale('fr');","                switch (event.type) {","                    case 'tournament':","                        _self.eventTitle = \"Compétition\";","                        break;","                    case 'stage':","                        _self.eventTitle = \"Stage\";","                        break;","                    case 'event':","                    default:","                        _self.eventTitle = \"Evènement\";","                        break;","                }","                _self.eventDescription = \"<strong>\" + event.name + \"</strong><br/>\";","                _self.eventDescription += event.description + \"<br/>\";","                _self.eventDescription += \"Début : \" + startAt.format(\"dddd, MMMM Do YYYY, H:mm:ss\");","                _self.eventDescription += \"<br/>Fin :\" + endAt.format(\"dddd, MMMM Do YYYY, H:mm:ss\");","                _self.deleteId = event.id;","            },","            closeModal() {","                const _self = this;","                _self.$refs['eventModal'].close();","            }","        },","        components: {","            vMenu, fullCalendar","        },","        mounted() {","            this.$nextTick(function () {","                const _self = this;","                auth.check(_self);","                _self.index();","            });","        }","    }","</script>",""],"id":1}],[{"start":{"row":37,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["        <ui-confirm","                title=\"Suppression\" type=\"primary\"","                confirm-button-icon=\"delete\"","                confirm-button-text=\"Supprimer\"","                deny-button-text=\"Annuler\"","                ref=\"deleteConfirm\"","                @confirm=\"deleteConfirmed\"","                @deny=\"deleteDenied\"","                close-on-confirm","        >","            &ecirc;tes-vous s&ucirc;r de vouloir supprimer l'évènement ?","        </ui-confirm>",""],"id":2}],[{"start":{"row":29,"column":0},"end":{"row":34,"column":0},"action":"remove","lines":["                <ui-button @click=\"destroy()\"","                           color=\"red\">Supprimer</ui-button>","                <ui-button v-if=\"isAdmin\"","                            @click=\"edit()\"","                           color=\"orange\">Editer</ui-button>",""],"id":3}],[{"start":{"row":4,"column":0},"end":{"row":11,"column":0},"action":"remove","lines":["            <small>","                <ui-icon-button","                        type=\"secondary\" icon=\"add\" color=\"accent\" size=\"large\"","                        @click.prevent=\"create()\"","                >","                </ui-icon-button>","            </small>",""],"id":4}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["        computed: {",""],"id":5}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["          isAdmin() {",""],"id":6}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["              return this.auth.checkIsAdmin();",""],"id":7}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["          }",""],"id":8}],[{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["        },",""],"id":9}],[{"start":{"row":49,"column":12},"end":{"row":72,"column":14},"action":"remove","lines":["edit() {","                const _self = this;","                router.push({ name: 'admin_judo_event_edit', params: { id: _self.deleteId } });","            },","            destroy() {","                const _self = this;","                _self.$refs['deleteConfirm'].open();","            },","            deleteConfirmed() {","                const _self = this;","                _self.closeModal();","                _self.$http.delete('api/judoevent/' + _self.deleteId).then(","                    () => {","                    _self.$emit('sas-snackbar', 'évènement supprimé');","                    _self.index();","                }).catch(","                    error   => {","                        _self.$emit('sas-errors', auth.showError(error.response, _self.formErrors));","                    }","                );","            },","            deleteDenied() {","","            },"],"id":10}],[{"start":{"row":49,"column":0},"end":{"row":50,"column":0},"action":"remove","lines":["            ",""],"id":11}],[{"start":{"row":78,"column":16},"end":{"row":78,"column":19},"action":"insert","lines":["// "],"id":12}],[{"start":{"row":105,"column":13},"end":{"row":105,"column":14},"action":"insert","lines":[","],"id":13}],[{"start":{"row":105,"column":14},"end":{"row":106,"column":0},"action":"insert","lines":["",""],"id":14},{"start":{"row":106,"column":0},"end":{"row":106,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":106,"column":12},"end":{"row":106,"column":23},"action":"insert","lines":["changeMonth"],"id":15}],[{"start":{"row":106,"column":23},"end":{"row":106,"column":24},"action":"insert","lines":["'"],"id":16}],[{"start":{"row":106,"column":12},"end":{"row":106,"column":13},"action":"remove","lines":["c"],"id":18},{"start":{"row":106,"column":12},"end":{"row":106,"column":13},"action":"insert","lines":["'"]}],[{"start":{"row":106,"column":13},"end":{"row":106,"column":14},"action":"insert","lines":["C"],"id":19}],[{"start":{"row":106,"column":13},"end":{"row":106,"column":14},"action":"remove","lines":["C"],"id":20}],[{"start":{"row":106,"column":13},"end":{"row":106,"column":14},"action":"insert","lines":["c"],"id":21}],[{"start":{"row":106,"column":25},"end":{"row":106,"column":27},"action":"insert","lines":["()"],"id":22}],[{"start":{"row":106,"column":26},"end":{"row":106,"column":27},"action":"remove","lines":[")"],"id":23}],[{"start":{"row":106,"column":25},"end":{"row":106,"column":26},"action":"remove","lines":["("],"id":24}],[{"start":{"row":106,"column":25},"end":{"row":106,"column":26},"action":"insert","lines":[":"],"id":25}],[{"start":{"row":106,"column":26},"end":{"row":106,"column":27},"action":"insert","lines":[" "],"id":26}],[{"start":{"row":106,"column":27},"end":{"row":106,"column":29},"action":"insert","lines":["()"],"id":27}],[{"start":{"row":106,"column":29},"end":{"row":106,"column":30},"action":"insert","lines":[" "],"id":28}],[{"start":{"row":106,"column":30},"end":{"row":106,"column":31},"action":"insert","lines":["{"],"id":29}],[{"start":{"row":106,"column":31},"end":{"row":108,"column":13},"action":"insert","lines":["","                ","            }"],"id":30}],[{"start":{"row":108,"column":13},"end":{"row":108,"column":14},"action":"insert","lines":[","],"id":31}],[{"start":{"row":108,"column":14},"end":{"row":109,"column":0},"action":"insert","lines":["",""],"id":32},{"start":{"row":109,"column":0},"end":{"row":109,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":109,"column":12},"end":{"row":109,"column":14},"action":"insert","lines":["''"],"id":33}],[{"start":{"row":109,"column":13},"end":{"row":109,"column":22},"action":"insert","lines":["moreClick"],"id":34}],[{"start":{"row":109,"column":23},"end":{"row":109,"column":24},"action":"insert","lines":[":"],"id":35}],[{"start":{"row":109,"column":24},"end":{"row":109,"column":25},"action":"insert","lines":[" "],"id":36}],[{"start":{"row":109,"column":25},"end":{"row":109,"column":27},"action":"insert","lines":["()"],"id":37}],[{"start":{"row":109,"column":27},"end":{"row":109,"column":28},"action":"insert","lines":[" "],"id":38}],[{"start":{"row":109,"column":28},"end":{"row":109,"column":29},"action":"insert","lines":["{"],"id":39}],[{"start":{"row":109,"column":29},"end":{"row":111,"column":13},"action":"insert","lines":["","                ","            }"],"id":40}],[{"start":{"row":111,"column":13},"end":{"row":111,"column":14},"action":"insert","lines":[","],"id":41}],[{"start":{"row":111,"column":14},"end":{"row":112,"column":0},"action":"insert","lines":["",""],"id":42},{"start":{"row":112,"column":0},"end":{"row":112,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":112,"column":12},"end":{"row":112,"column":21},"action":"insert","lines":["moreClick"],"id":43}],[{"start":{"row":112,"column":12},"end":{"row":112,"column":13},"action":"insert","lines":["'"],"id":44}],[{"start":{"row":112,"column":22},"end":{"row":112,"column":23},"action":"insert","lines":["'"],"id":45}],[{"start":{"row":112,"column":23},"end":{"row":112,"column":24},"action":"insert","lines":[":"],"id":46}],[{"start":{"row":112,"column":24},"end":{"row":112,"column":25},"action":"insert","lines":[" "],"id":47}],[{"start":{"row":112,"column":25},"end":{"row":112,"column":27},"action":"insert","lines":["()"],"id":48}],[{"start":{"row":112,"column":27},"end":{"row":112,"column":28},"action":"insert","lines":[" "],"id":49}],[{"start":{"row":112,"column":28},"end":{"row":112,"column":29},"action":"insert","lines":["="],"id":50}],[{"start":{"row":112,"column":29},"end":{"row":112,"column":30},"action":"insert","lines":[">"],"id":51}],[{"start":{"row":112,"column":29},"end":{"row":112,"column":30},"action":"remove","lines":[">"],"id":52}],[{"start":{"row":112,"column":28},"end":{"row":112,"column":29},"action":"remove","lines":["="],"id":53}],[{"start":{"row":112,"column":27},"end":{"row":112,"column":28},"action":"remove","lines":[" "],"id":54}],[{"start":{"row":112,"column":27},"end":{"row":112,"column":28},"action":"insert","lines":[" "],"id":55}],[{"start":{"row":112,"column":28},"end":{"row":112,"column":29},"action":"insert","lines":["{"],"id":56}],[{"start":{"row":112,"column":29},"end":{"row":114,"column":13},"action":"insert","lines":["","                ","            }"],"id":57}],[{"start":{"row":112,"column":23},"end":{"row":112,"column":24},"action":"remove","lines":[":"],"id":58}],[{"start":{"row":112,"column":23},"end":{"row":112,"column":24},"action":"remove","lines":[" "],"id":59}],[{"start":{"row":109,"column":24},"end":{"row":109,"column":25},"action":"remove","lines":[" "],"id":60}],[{"start":{"row":109,"column":23},"end":{"row":109,"column":24},"action":"remove","lines":[":"],"id":61}],[{"start":{"row":106,"column":25},"end":{"row":106,"column":26},"action":"remove","lines":[":"],"id":62}],[{"start":{"row":106,"column":25},"end":{"row":106,"column":26},"action":"remove","lines":[" "],"id":63}],[{"start":{"row":78,"column":0},"end":{"row":79,"column":0},"action":"remove","lines":["                // router.push({ name: 'admin_judo_event_new', params: { startAt: day } });",""],"id":64}],[{"start":{"row":108,"column":0},"end":{"row":109,"column":0},"action":"remove","lines":["            'moreClick'() {",""],"id":65}],[{"start":{"row":108,"column":0},"end":{"row":109,"column":0},"action":"remove","lines":["                ",""],"id":66}],[{"start":{"row":108,"column":0},"end":{"row":109,"column":0},"action":"remove","lines":["            },",""],"id":67}]]},"ace":{"folds":[],"scrolltop":780,"scrollleft":0,"selection":{"start":{"row":81,"column":68},"end":{"row":81,"column":68},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1503813883942,"hash":"022ff6af4f4474f5c7579f7a9760d3722d3adca5"}
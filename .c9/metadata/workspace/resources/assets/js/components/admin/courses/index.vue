{"changed":true,"filter":false,"title":"index.vue","tooltip":"/resources/assets/js/components/admin/courses/index.vue","value":"<template>\n  <div class=\"col-xs-12\">\n    <h1>\n      Liste des cours\n      <small>\n        <ui-icon-button\n          type=\"secondary\" icon=\"add\" color=\"accent\" size=\"large\"\n          @click.prevent=\"create()\"\n        >\n        </ui-icon-button>\n      </small>\n    </h1>\n      <scheduler\n        :time-ground='[\"15:00\", \"16:00\", \"17:00\", \"18:00\", \"19:00\", \"20:00\", \"21:00\", \"22:00\" ]'\n        :week-ground=\"['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche']\"\n        :task-detail=\"listCourses\">\n      </scheduler>\n    <table\n      class=\"table table-striped\"\n      v-if=\"courses.length > 0\">\n      <thead>\n        <tr>\n            <th>#</th>\n            <th>Saison</th>\n            <th>Jour</th>\n            <th>Heures</th>\n            <th>Professeur</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"course in courses\">\n          <td>\n            <ui-icon-button\n                type=\"secondary\" icon=\"edit\" color=\"orange\" size=\"large\"\n                @click.prevent=\"edit(course.id)\">\n            </ui-icon-button>\n            <ui-icon-button\n                type=\"secondary\" size=\"large\" icon=\"delete\" color=\"red\"\n                @click.prevent=\"destroy(course.id)\">\n            </ui-icon-button>\n          </td>\n          <td>{{ course.season }}</td>\n          <td>{{ course.day }}</td>\n          <td>{{ course.start_at }} - {{ course.end_at }}</td>\n          <td>{{ course.teacher }}</td>\n        </tr>\n      </tbody>\n    </table>\n    <ui-confirm\n        title=\"Suppression\" type=\"primary\"\n        confirm-button-icon=\"delete\"\n        confirm-button-text=\"Supprimer\"\n        deny-button-text=\"Annuler\"\n        ref=\"deleteConfirm\"\n        @confirm=\"deleteConfirmed\"\n        @deny=\"deleteDenied\"\n        close-on-confirm\n        >\n        &ecirc;tes-vous s&ucirc;r de vouloir supprimer le cours ?\n    </ui-confirm>\n  </div>\n</template>\n<script>\n  import auth from '../../../auth';\n  import vMenu from '../../v-menu.vue';\n  import Keen from 'keen-ui';\n  import scheduler from '../../scheduler/vue-schedule.vue';\n  import {app} from './../../../app.js';\n  import {router} from './../../../app.js';\n  export default {\n    data() {\n      return {\n        courses:      [],\n        listCourses:  [],\n        deleteId:     ''\n      }\n    },\n    methods: {\n      index() {\n        const _self = this;\n        _self.$http.get('api/course').then(\n          (response) => {\n              let data          = response.data;\n              _self.courses     = data.objects;\n              _self.listCourses = data.scheduler;\n          },\n          (response) => {\n            _self.$emit('sas-snackbar', 'Une erreur est survenue');\n          }\n        );\n      },\n      create() {\n        router.push({ name: 'admin_courses_new' });\n      },\n      deleteConfirmed() {\n\n      },\n      deleteDenied() {\n\n      },\n      edit(id) {\n          router.push({ name: 'admin_courses_edit', params: { id: id } });\n      },\n      destroy(id) {\n          const _self = this;\n          _self.deleteId = id;\n          _self.$refs['deleteConfirm'].open();\n      },\n    },\n    components: {\n        vMenu, scheduler\n    },\n    mounted() {\n      this.$nextTick(function() {\n        const _self = this;\n        auth.check(_self);\n        _self.index();\n      });\n    }\n  }\n</script>\n","undoManager":{"mark":-2,"position":2,"stack":[[{"start":{"row":86,"column":25},"end":{"row":87,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":87,"column":0},"end":{"row":87,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":87,"column":12},"end":{"row":87,"column":67},"action":"insert","lines":["_self.$emit('sas-snackbar', 'Une erreur est survenue');"],"id":3}],[{"start":{"row":88,"column":0},"end":{"row":89,"column":0},"action":"remove","lines":["              console.log(response);",""],"id":4}]]},"ace":{"folds":[],"scrolltop":900,"scrollleft":0,"selection":{"start":{"row":88,"column":0},"end":{"row":88,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":46,"state":"start","mode":"ace/mode/html"}},"timestamp":1490898218794}
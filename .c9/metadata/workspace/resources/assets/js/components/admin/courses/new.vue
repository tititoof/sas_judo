{"changed":true,"filter":false,"title":"new.vue","tooltip":"/resources/assets/js/components/admin/courses/new.vue","value":"<template>\n  <div class=\"col-xs-12\">\n    <h1>\n      Nouveau cours\n      <small>\n        <ui-button\n          type=\"secondary\" color=\"accent\" size=\"large\"\n          @click.prevent=\"store()\">\n          Cr&eacute;er\n        </ui-button>\n      </small>\n    </h1>\n    <ui-select\n      name=\"season\" label=\"Saison\"\n      :options=\"seasons\"\n      v-model=\"seasonSelected\"\n      placeholder=\"Choisir la saison\" show-search z-index=\"1\"\n    >\n    </ui-select>\n    <ui-textbox\n      label=\"Nom\" name=\"name\" type=\"text\" placeholder=\"Entrer le nom du cours\"\n      v-model=\"name\"\n      >\n    </ui-textbox>\n    <ui-select\n      name=\"day\" label=\"Jour\"\n      :options=\"days\"\n      v-model=\"daySelected\"\n      placeholder=\"Choisir le jour\" show-search z-index=\"1\"\n    >\n    </ui-select>\n    Heure de d&eacute;but\n    <vue-timepicker\n      :minute-interval=\"5\" v-model=\"startTimeAt\"\n    >\n    </vue-timepicker>\n    Heure de fin\n    <vue-timepicker\n      :minute-interval=\"5\"\n      v-model=\"endTimeAt\"\n    >\n    </vue-timepicker>\n    <ui-select\n      name=\"teacher\"\n      label=\"Professeur\"\n      :options=\"teachers\"\n      v-model=\"teacherSelected\"\n      placeholder=\"Choisir le professeur\" show-search z-index=\"1\"\n    >\n    </ui-select>\n  </div>\n</template>\n<script>\n  import auth from '../../../auth';\n  import Keen from 'keen-ui';\n  import {app} from './../../../app.js';\n  import {router} from './../../../app.js';\n  import VueTimepicker from 'vue2-timepicker';\n  import moment from 'moment';\n  export default {\n    data() {\n      return {\n        days: [],\n        daySelected:      '',\n        startTimeAt: {\n            HH: \"08\",\n            mm: \"30\"\n        },\n        endTimeAt: {\n            HH: \"12\",\n            mm: \"00\"\n        },\n        teachers:         [],\n        teacherSelected:  '',\n        name:             '',\n        seasons:          [],\n        seasonSelected:   ''\n      }\n    },\n    components: {\n        VueTimepicker\n    },\n    methods: {\n      index() {\n        const _self = this;\n        _self.$http.get('api/course/create').then(\n          (response) => {\n            const data = response.data;\n            _self.teachers = data.objects.teachers;\n            _self.seasons  = data.objects.seasons;\n            _self.days     = data.objects.days;\n          },\n          (response) => {\n            _self.$emit('sas-snackbar', 'Une erreur est survenue');\n          }\n        );\n      },\n      store() {\n        const _self = this;\n        _self.$http.post('api/course', { 'name': _self.name, 'day': _self.daySelected.value,\n          'start_at': _self.startTimeAt, 'end_at': _self.endTimeAt,\n          'teacher_id': _self.teacherSelected.value, 'season_id': _self.seasonSelected.value } ).then(\n          (response) => {\n            _self.$emit('sas-snackbar', 'Saison ajoutÃ©e');\n            router.push({ name: 'admin_courses_index' });\n          },\n          (response) => {\n            _self.$emit('sas-snackbar', 'Une erreur est survenue');\n          }\n        )\n      }\n    },\n    mounted() {\n      this.$nextTick(function() {\n        const _self = this;\n        auth.check(_self);\n        _self.index();\n      })\n    }\n  }\n</script>\n","undoManager":{"mark":10,"position":11,"stack":[[{"start":{"row":93,"column":25},"end":{"row":94,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":94,"column":0},"end":{"row":94,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":94,"column":12},"end":{"row":94,"column":67},"action":"insert","lines":["_self.$emit('sas-snackbar', 'Une erreur est survenue');"],"id":3}],[{"start":{"row":95,"column":0},"end":{"row":96,"column":0},"action":"remove","lines":["            console.log(response);",""],"id":4}],[{"start":{"row":107,"column":25},"end":{"row":108,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":108,"column":0},"end":{"row":108,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":108,"column":12},"end":{"row":108,"column":67},"action":"insert","lines":["_self.$emit('sas-snackbar', 'Une erreur est survenue');"],"id":6}],[{"start":{"row":109,"column":0},"end":{"row":110,"column":0},"action":"remove","lines":["            console.log(response);",""],"id":7}],[{"start":{"row":88,"column":12},"end":{"row":88,"column":15},"action":"remove","lines":["let"],"id":8},{"start":{"row":88,"column":12},"end":{"row":88,"column":13},"action":"insert","lines":["c"]}],[{"start":{"row":88,"column":13},"end":{"row":88,"column":14},"action":"insert","lines":["o"],"id":9}],[{"start":{"row":88,"column":14},"end":{"row":88,"column":15},"action":"insert","lines":["n"],"id":10}],[{"start":{"row":88,"column":15},"end":{"row":88,"column":16},"action":"insert","lines":["s"],"id":11}],[{"start":{"row":88,"column":16},"end":{"row":88,"column":17},"action":"insert","lines":["t"],"id":12}],[{"start":{"row":87,"column":0},"end":{"row":88,"column":0},"action":"remove","lines":["            const _self = this;",""],"id":13}]]},"ace":{"folds":[],"scrolltop":1140,"scrollleft":0,"selection":{"start":{"row":87,"column":0},"end":{"row":87,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":80,"state":"js-no_regex","mode":"ace/mode/html"}},"timestamp":1500441772736}